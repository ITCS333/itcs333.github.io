<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code Playground</title>

  <!-- CodeMirror 5 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/codemirror.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/theme/dracula.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/mode/css/css.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/mode/htmlmixed/htmlmixed.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/addon/edit/closetag.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.17/addon/edit/closebrackets.min.js"></script>

  <style>
    /* â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #1e1f29;
      --surface:   #282a36;
      --border:    #44475a;
      --accent:    #bd93f9;
      --accent2:   #50fa7b;
      --text:      #f8f8f2;
      --muted:     #6272a4;
      --tab-h:     42px;
      --toolbar-h: 52px;
    }

    html, body {
      height: 100%;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow: hidden;
    }

    /* â”€â”€ Toolbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #toolbar {
      height: var(--toolbar-h);
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      padding: 0 16px;
      gap: 10px;
      flex-shrink: 0;
    }

    #toolbar h1 {
      font-size: 1rem;
      font-weight: 700;
      color: var(--accent);
      flex: 1;
      white-space: nowrap;
    }

    .toolbar-btn {
      background: var(--border);
      color: var(--text);
      border: none;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 0.82rem;
      cursor: pointer;
      transition: background 0.15s;
      white-space: nowrap;
    }
    .toolbar-btn:hover { background: var(--muted); }
    .toolbar-btn.run   { background: var(--accent2); color: #1e1f29; font-weight: 700; }
    .toolbar-btn.run:hover { filter: brightness(1.1); }

    /* â”€â”€ App Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #app {
      display: flex;
      flex-direction: column;
      height: calc(100vh - var(--toolbar-h));
    }

    /* â”€â”€ Mobile Tab Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #tab-bar {
      display: flex;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }

    .tab-btn {
      flex: 1;
      height: var(--tab-h);
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      color: var(--muted);
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: color 0.15s, border-color 0.15s;
      letter-spacing: 0.03em;
    }
    .tab-btn:hover { color: var(--text); }
    .tab-btn.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }

    /* â”€â”€ Panels Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #panels {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    /* â”€â”€ Editor Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .editor-panel {
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .panel-label {
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
      padding: 5px 10px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }

    /* CodeMirror fills its panel */
    .CodeMirror {
      flex: 1;
      height: 100% !important;
      font-size: 0.9rem;
      line-height: 1.6;
      font-family: 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
    }
    .cm-wrap {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .cm-wrap .CodeMirror { height: 100% !important; }

    /* â”€â”€ Preview Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #preview-panel {
      display: flex;
      flex-direction: column;
      background: #fff;
    }

    #preview-frame {
      flex: 1;
      border: none;
      width: 100%;
      background: #fff;
    }

    /* â”€â”€ Divider (desktop only) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #divider {
      width: 5px;
      background: var(--border);
      cursor: col-resize;
      flex-shrink: 0;
      transition: background 0.15s;
      display: none;
    }
    #divider:hover, #divider.dragging { background: var(--accent); }

    /* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(80px);
      background: var(--accent2);
      color: #1e1f29;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.85rem;
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
      pointer-events: none;
      z-index: 999;
    }
    #toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESPONSIVE BREAKPOINTS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    /* â”€â”€ Mobile (default): stacked tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .editor-panel { width: 100%; height: 100%; }

    /* Only one panel visible at a time */
    .editor-panel.hidden,
    #preview-panel.hidden {
      display: none;
    }

    /* On mobile, editor sub-tabs (HTML/CSS/JS) are hidden;
       the top tab bar handles switching */
    .panel-label { display: none; }

    /* â”€â”€ Tablet / Desktop (â‰¥ 768px): side by side â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (min-width: 768px) {
      /* Hide the mobile tab bar */
      #tab-bar { display: none; }

      /* Restore labels */
      .panel-label { display: block; }

      /* Stack the three editors vertically on the left */
      #editor-column {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        flex-shrink: 0;
        /* width set by JS / default 50% */
        width: 50%;
      }

      .editor-panel {
        flex: 1;
        width: 100% !important;
        border-bottom: 1px solid var(--border);
        /* Override mobile hidden state */
        display: flex !important;
      }
      .editor-panel:last-child { border-bottom: none; }

      #preview-panel {
        flex: 1;
        display: flex !important;
      }

      #divider { display: block; }
    }
  </style>
</head>
<body>

<!-- â”€â”€ Toolbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="toolbar">
  <h1>ITCS333 Playground</h1>
  <button class="toolbar-btn run" id="btn-run">â–¶ Run</button>
  <button class="toolbar-btn" id="btn-share">â˜ Share</button>
  <button class="toolbar-btn" id="btn-clear">âœ• Clear</button>
</div>

<!-- â”€â”€ App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="app">

  <!-- Mobile tab switcher -->
  <div id="tab-bar">
    <button class="tab-btn active" data-target="html-panel">HTML</button>
    <button class="tab-btn"        data-target="css-panel">CSS</button>
    <button class="tab-btn"        data-target="js-panel">JS</button>
    <button class="tab-btn"        data-target="preview-panel">Preview</button>
  </div>

  <!-- Panels -->
  <div id="panels">

    <!-- Left column: 3 editors -->
    <div id="editor-column">

      <div class="editor-panel" id="html-panel">
        <div class="panel-label">HTML</div>
        <div class="cm-wrap" id="html-cm-wrap"></div>
      </div>

      <div class="editor-panel hidden" id="css-panel">
        <div class="panel-label">CSS</div>
        <div class="cm-wrap" id="css-cm-wrap"></div>
      </div>

      <div class="editor-panel hidden" id="js-panel">
        <div class="panel-label">JS</div>
        <div class="cm-wrap" id="js-cm-wrap"></div>
      </div>

    </div><!-- /editor-column -->

    <!-- Drag divider -->
    <div id="divider"></div>

    <!-- Right: Preview -->
    <div id="preview-panel" class="hidden">
      <div class="panel-label">Preview</div>
      <iframe id="preview-frame" sandbox="allow-scripts allow-modals"></iframe>
    </div>

  </div><!-- /panels -->
</div><!-- /app -->

<div id="toast"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1.  DEFAULTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const DEFAULT = {
  html: `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Page</title>
</head>
<body>
  <h1>Hello, World!</h1>
  <p>Edit the code on the left and click <strong>Run</strong>.</p>
</body>
</html>`,
  css: `/* Your CSS here */
body {
  font-family: system-ui, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  margin: 0;
  background: #f0f4ff;
  color: #1a1a2e;
}

h1 {
  color: #6c63ff;
}`,
  js: `// Your JavaScript here
console.log('Hello from the editor!');`
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   2.  URL PRELOAD  (Base64-encoded JSON)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function loadFromURL() {
  try {
    const params = new URLSearchParams(window.location.search);
    const encoded = params.get('code');
    if (!encoded) return null;
    const json = atob(encoded);
    return JSON.parse(json);
  } catch (e) {
    console.warn('Could not parse ?code= param', e);
    return null;
  }
}

const preloaded = loadFromURL();
const initial = {
  html: preloaded?.html ?? DEFAULT.html,
  css:  preloaded?.css  ?? DEFAULT.css,
  js:   preloaded?.js   ?? DEFAULT.js,
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3.  CODEMIRROR INSTANCES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cmOptions = (mode) => ({
  mode,
  theme: 'dracula',
  lineNumbers: true,
  autoCloseTags: true,
  autoCloseBrackets: true,
  indentUnit: 2,
  tabSize: 2,
  indentWithTabs: false,
  lineWrapping: false,
});

const htmlEditor = CodeMirror(document.getElementById('html-cm-wrap'), {
  ...cmOptions('htmlmixed'),
  value: initial.html,
});

const cssEditor = CodeMirror(document.getElementById('css-cm-wrap'), {
  ...cmOptions('css'),
  value: initial.css,
});

const jsEditor = CodeMirror(document.getElementById('js-cm-wrap'), {
  ...cmOptions('javascript'),
  value: initial.js,
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   4.  RUN / PREVIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildDocument() {
  const html = htmlEditor.getValue();
  const css  = cssEditor.getValue();
  const js   = jsEditor.getValue();

  // If user wrote a full HTML doc, inject CSS/JS into it.
  // Otherwise wrap everything.
  const isFullDoc = /<!doctype/i.test(html) || /<html/i.test(html);

  if (isFullDoc) {
    let doc = html;
    // inject <style> before </head> or at top
    const styleTag = `<style>${css}</style>`;
    const scriptTag = `<script>${js}<\/script>`;
    if (/<\/head>/i.test(doc)) {
      doc = doc.replace(/<\/head>/i, `${styleTag}\n</head>`);
    } else {
      doc = styleTag + '\n' + doc;
    }
    if (/<\/body>/i.test(doc)) {
      doc = doc.replace(/<\/body>/i, `${scriptTag}\n</body>`);
    } else {
      doc = doc + '\n' + scriptTag;
    }
    return doc;
  }

  return `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <style>${css}</style>
</head>
<body>
${html}
<script>${js}<\/script>
</body>
</html>`;
}

function runPreview() {
  const frame = document.getElementById('preview-frame');
  const doc = buildDocument();
  // Use srcdoc for sandboxed, no-backend preview
  frame.srcdoc = doc;
}

// Auto-run on load
window.addEventListener('load', () => {
  runPreview();
  // Let CodeMirror measure itself correctly
  setTimeout(() => {
    htmlEditor.refresh();
    cssEditor.refresh();
    jsEditor.refresh();
  }, 50);
});

document.getElementById('btn-run').addEventListener('click', runPreview);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   5.  SHARE  (copies URL with encoded state)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function getShareURL() {
  const payload = JSON.stringify({
    html: htmlEditor.getValue(),
    css:  cssEditor.getValue(),
    js:   jsEditor.getValue(),
  });
  const encoded = btoa(unescape(encodeURIComponent(payload))); // UTF-8 safe
  const url = new URL(window.location.href);
  url.search = '';
  url.searchParams.set('code', encoded);
  return url.toString();
}

document.getElementById('btn-share').addEventListener('click', () => {
  const url = getShareURL();
  navigator.clipboard.writeText(url).then(() => showToast('Link copied! ğŸ‰'));
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   6.  CLEAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('btn-clear').addEventListener('click', () => {
  if (!confirm('Clear all editors?')) return;
  htmlEditor.setValue('');
  cssEditor.setValue('');
  jsEditor.setValue('');
  runPreview();
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   7.  MOBILE TABS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const tabBtns = document.querySelectorAll('.tab-btn');
const allPanels = [
  document.getElementById('html-panel'),
  document.getElementById('css-panel'),
  document.getElementById('js-panel'),
  document.getElementById('preview-panel'),
];

tabBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    tabBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const targetId = btn.dataset.target;
    allPanels.forEach(p => {
      p.classList.toggle('hidden', p.id !== targetId);
    });

    // Refresh editors after becoming visible
    if (targetId === 'html-panel') htmlEditor.refresh();
    if (targetId === 'css-panel')  cssEditor.refresh();
    if (targetId === 'js-panel')   jsEditor.refresh();
  });
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   8.  DESKTOP DRAG DIVIDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const divider      = document.getElementById('divider');
const editorColumn = document.getElementById('editor-column');
const panelsEl     = document.getElementById('panels');

let isDragging = false;

divider.addEventListener('mousedown', (e) => {
  isDragging = true;
  divider.classList.add('dragging');
  document.body.style.cursor = 'col-resize';
  document.body.style.userSelect = 'none';
  e.preventDefault();
});

document.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  const rect = panelsEl.getBoundingClientRect();
  let pct = (e.clientX - rect.left) / rect.width * 100;
  pct = Math.min(Math.max(pct, 20), 80); // clamp 20%â€“80%
  editorColumn.style.width = pct + '%';
});

document.addEventListener('mouseup', () => {
  if (!isDragging) return;
  isDragging = false;
  divider.classList.remove('dragging');
  document.body.style.cursor = '';
  document.body.style.userSelect = '';
  htmlEditor.refresh();
  cssEditor.refresh();
  jsEditor.refresh();
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   9.  RESPONSIVE: detect breakpoint changes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const desktopMQ = window.matchMedia('(min-width: 768px)');

function onBreakpointChange(e) {
  if (e.matches) {
    // Switched to desktop â€” ensure all panels visible
    allPanels.forEach(p => p.classList.remove('hidden'));
    // Re-show preview panel (it might be hidden from mobile state)
    document.getElementById('preview-panel').classList.remove('hidden');
  } else {
    // Switched to mobile â€” show only the active tab's panel
    const activeTab = document.querySelector('.tab-btn.active');
    const targetId = activeTab?.dataset.target ?? 'html-panel';
    allPanels.forEach(p => {
      p.classList.toggle('hidden', p.id !== targetId);
    });
  }
  // Refresh editors after layout shift
  setTimeout(() => {
    htmlEditor.refresh();
    cssEditor.refresh();
    jsEditor.refresh();
  }, 50);
}

desktopMQ.addEventListener('change', onBreakpointChange);
// Run once on load to set initial state
onBreakpointChange(desktopMQ);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   10. TOAST HELPER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showToast(msg) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 2500);
}
</script>
</body>
</html>
